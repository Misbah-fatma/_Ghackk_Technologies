{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const navigate=useNavigate();const axiosInstance=axios.create({baseURL:process.env.REACT_APP_API_URL});const handleSubmit=async e=>{e.preventDefault();try{const response=await axios.post('https://server-dazx.onrender.com/api/login',{email,password},{headers:{'Content-Type':'application/json'}});const user=response.data;// Get the user data from the response\nconsole.log('API Response:',user);// Log the user object to check if it's correct\n// Ensure the user object contains necessary information, e.g., user.username\nif(user&&user.username){localStorage.setItem('user',JSON.stringify(user));// Save user data to localStorage\nconsole.log('Stored User:',localStorage.getItem('user'));// Check if it is stored correctly\nnavigate('/');// Redirect to home page\n}else{console.error('User object is invalid or missing username');}}catch(error){if(error.response){console.error('Login failed',error.response.data);// Log the error response\nalert('Login failed: '+error.response.data.message||error.message);}else{console.error('Error during login',error);}}};console.log(localStorage.getItem('user'));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"section\",{class:\"normal-breadcrumb\",children:/*#__PURE__*/_jsx(\"div\",{class:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"col-lg-12 text-center position-relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"assets/img/normal-breadcrumb.jpg\",alt:\"Breadcrumb Background\",class:\"img-fluid\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"normal__breadcrumb__text\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Welcome to the official Anime blog.\"})]})]})})})}),/*#__PURE__*/_jsx(\"section\",{class:\"login spad\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"login__form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{class:\"input__item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Email address\"}),/*#__PURE__*/_jsx(\"span\",{class:\"icon_mail\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input__item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"span\",{class:\"icon_lock\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"site-btn\",children:\"Login Now\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",class:\"forget_pass\",children:\"Forgot Your Password?\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-6 d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"login__register text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Don't Have An Account?\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/register\",class:\"primary-btn\",children:\"Register Now\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"login__social\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"login__social__links\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"or\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"#\",class:\"facebook\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-facebook\"}),\" Sign in With Facebook\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"#\",class:\"google\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-google\"}),\" Sign in With Google\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"#\",class:\"twitter\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-twitter\"}),\" Sign in With Twitter\"]})})]})]})})})})]})})]});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","navigate","axiosInstance","create","baseURL","process","env","REACT_APP_API_URL","handleSubmit","e","preventDefault","response","post","headers","user","data","console","log","username","localStorage","setItem","JSON","stringify","getItem","error","alert","message","children","class","src","alt","onSubmit","type","value","onChange","target","placeholder","href"],"sources":["/Users/macbookair/Desktop/Projects/assignemnt/client/src/Components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from \"axios\";\n\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  const axiosInstance = axios.create({baseURL: process.env.REACT_APP_API_URL});\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const response = await axios.post('https://server-dazx.onrender.com/api/login', {\n        email,\n        password,\n      }, {\n        headers: { 'Content-Type': 'application/json' },\n      });\n\n      const user = response.data; // Get the user data from the response\n\n      console.log('API Response:', user); // Log the user object to check if it's correct\n\n      // Ensure the user object contains necessary information, e.g., user.username\n      if (user && user.username) {\n        localStorage.setItem('user', JSON.stringify(user)); // Save user data to localStorage\n        console.log('Stored User:', localStorage.getItem('user')); // Check if it is stored correctly\n        navigate('/'); // Redirect to home page\n      } else {\n        console.error('User object is invalid or missing username');\n      }\n    } catch (error) {\n      if (error.response) {\n        console.error('Login failed', error.response.data); // Log the error response\n        alert('Login failed: ' + error.response.data.message || error.message);\n      } else {\n        console.error('Error during login', error);\n      }\n    }\n  };\n  \n  \n  console.log(localStorage.getItem('user'));\n\n  return (\n    <div>\n      <section class=\"normal-breadcrumb\">\n        <div class=\"container-fluid\">\n          <div class=\"row\">\n            <div class=\"col-lg-12 text-center position-relative\">\n              <img src=\"assets/img/normal-breadcrumb.jpg\" alt=\"Breadcrumb Background\" class=\"img-fluid\" />\n              <div class=\"normal__breadcrumb__text\">\n                <h2>Login</h2>\n                <p>Welcome to the official Anime blog.</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section class=\"login spad\">\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-lg-6\">\n              <div class=\"login__form\">\n                <h3>Login</h3>\n                <form onSubmit={handleSubmit}>\n                  <div class=\"input__item\">\n                    <input type=\"email\"\n                      value={email}\n                      onChange={(e) => setEmail(e.target.value)} placeholder=\"Email address\" />\n                    <span class=\"icon_mail\"></span>\n                  </div>\n                  <div class=\"input__item\">\n                    <input type=\"password\"\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" />\n                    <span class=\"icon_lock\"></span>\n                  </div>\n                  <button type=\"submit\" class=\"site-btn\">Login Now</button>\n                </form>\n                <a href=\"#\" class=\"forget_pass\">Forgot Your Password?</a>\n              </div>\n            </div>\n            <div class=\"col-lg-6 d-flex justify-content-center align-items-center\">\n              <div class=\"login__register text-center\">\n                <h3>Don't Have An Account?</h3>\n                <a href=\"/register\" class=\"primary-btn\">Register Now</a>\n              </div>\n            </div>\n\n          </div>\n          <div class=\"login__social\">\n            <div class=\"row d-flex justify-content-center\">\n              <div class=\"col-lg-6\">\n                <div class=\"login__social__links\">\n                  <span>or</span>\n                  <ul>\n                    <li><a href=\"#\" class=\"facebook\"><i class=\"fa fa-facebook\"></i> Sign in With\n                      Facebook</a></li>\n                    <li><a href=\"#\" class=\"google\"><i class=\"fa fa-google\"></i> Sign in With Google</a></li>\n                    <li><a href=\"#\" class=\"twitter\"><i class=\"fa fa-twitter\"></i> Sign in With Twitter</a>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}